"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[31281],{50165:(e,t,n)=>{n.d(t,{$:()=>c,r:()=>m});var i=n(667294),a=n(498490),r=n(989820),l=n(297728),u=n(730212),s=n(961754),o=n(785893);let{Provider:d,useHook:c}=(0,a.Z)("PinRep");function m({children:e}){let{isAuthenticated:t}=(0,u.B)(),{checkExperiment:n}=(0,l.F)(),{experience:a}=(0,r.Ow)(1000069),[c,m]=(0,i.useState)(!0),[p,f]=(0,i.useState)(!1),[v,g]=(0,i.useState)(!1),[_,h]=(0,i.useState)(null),[y,w]=(0,i.useState)(null),S=(0,r.oS)(1000069),{anyEnabled:A}=n("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),D=(0,s.Z)(t&&A?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,i.useEffect)(()=>{if(!t){m(!1);return}a&&(!a||a?.experience_id===500417&&a?.display_data.hide_footer)?S.viewExperience(1000069,500417):m(!1),f(!0)},[a]);let I=(0,i.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:v,hasSimplifiedPinGridExpLoaded:p,hidePinRepFooter:c,quickSaveBoardId:D,setHasMetSaveRequirementOnUseCaseFeed:g,setUseCaseFeedOriginalPinId:w,setUseCaseFeedRepinId:h,useCaseFeedOriginalPinId:y,useCaseFeedRepinId:_}),[v,p,c,D,g,w,h,y,_]);return(0,o.jsx)(d,{value:I,children:e})}},293321:(e,t,n)=>{n.d(t,{kf:()=>g,l5:()=>f,of:()=>m,xC:()=>v,yz:()=>p});var i=n(667294),a=n(498490),r=n(915571),l=n(969119),u=n(346645),s=n(415787),o=n(785893);let{Provider:d,useMaybeHook:c}=(0,a.Z)("PwaContext"),m=({children:e,initialContext:t})=>{let[n,a]=(0,i.useState)(null),u=t||{pwaType:"unknown",twaType:null},c=u.pwaType;(0,l.Z)(()=>{let e=(0,r.FB)(window)||"unknown";a(e),c!==e&&(0,s.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let m="unknown"===c&&n?n:c,{twaType:p}=u,f=(0,i.useMemo)(()=>({pwaType:m,twaType:p}),[m,p]);return(0,o.jsx)(d,{value:f,children:e})},p=()=>{let e=c();return e?.pwaType??"unknown"},f=()=>{let e=c();return e?.twaType??null},v=()=>"android-twa"===p(),g=()=>{let e=p(),t=(0,u.Z)();return"unknown"===e&&t?null:"windows"===e}},529264:(e,t,n)=>{n.d(t,{H5:()=>v,Xn:()=>p,an:()=>f});var i=n(868808);let a="BING",r="GOOGLE",l="YAHOO",u="YANDEX",s="RAKUTEN",o="NAVER",d="AMP_CACHE",c="DUCKDUCKGO",m=[r,a,l,u,s,o,d,c];function p(e){return m.includes(function(e){let{hostname:t}=(0,i.Qc)(e,!0);if(t&&e){if(t.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return r;if(t.includes("bing."))return a;if(t.includes("yahoo."))return l;if(t.includes("yandex."))return u;else if(t.includes("rakuten."))return s;else if(t.includes("naver."))return o;else if(t.includes("duckduckgo."))return c;else if(t.includes(".cdn.ampproject.org"))return d}return""}(e))}function f(e){return e||"undefined"!=typeof document&&document.referrer||""}let v=e=>{let t=new URL(e);return t.searchParams.set("nii","t"),t.href}},623722:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(414416),a=n(503237);let r=e=>{let t=/^\/pin\/([a-zA-Z0-9-]+)/,n=(0,a.Z)(e);if(t.test(n.path)){let e=n.path.match(t);if(e)return(0,i.Z)(e[1]).pinId||void 0}}},563646:(e,t,n)=>{n.d(t,{w:()=>s,z:()=>u});var i=n(667294),a=n(498490),r=n(785893);let{Provider:l,useMaybeHook:u}=(0,a.Z)("CloseupPreviewContext");function s({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,r.jsx)(l,{value:a,children:e})}},193836:(e,t,n)=>{n.d(t,{_l:()=>y,cO:()=>h,t2:()=>w,w2:()=>S,xM:()=>_});var i=n(667294),a=n(616550),r=n(252071),l=n(282999),u=n(868808),s=n(410150),o=n(383399),d=n(785893);let c="UnauthDesktopSocialPinLandingPageContext",m="AthDesktopSocialPinLandingPageContext",p="AuthMobileSocialPinLandingPageContext",f=(0,i.createContext)(),v=({children:e})=>{let[t,n]=(0,i.useState)(!1),[a,r]=(0,i.useState)(!1),l=(0,i.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:a,setHasSeenAuthDesktopLandingToast:r}),[t,n,a,r]);return(0,d.jsx)(f.Provider,{value:l,children:e})},g=(0,i.createContext)({key:"",data:null}),_=({children:e})=>{let t=(0,a.TH)(),n=(0,o.Z)(),f=n&&n.isAuth,_=(0,s.HG)(),h=(0,i.useRef)((0,l.fY)(t)&&(0,u.mB)(t.search).invite_code||null),y=(0,a.LX)(t.pathname,{path:"/pin/:id"}),w=String(y&&"id"in y.params&&y.params.id)||"",[S,A]=(0,i.useState)({key:"",data:null});return(0,i.useEffect)(()=>{(async function(){let e=h.current;if(e)try{let t=r.Z.create("InviteCodeMetadataResource",{invite_code:e}),i=(await t.callGet()).resource_response.data;if(i){let e=i.sender??null,t=f&&e.id!==n.id&&e?.should_show_messaging&&n.should_show_messaging;!f&&_?A({key:c,data:{inviter:e,popoverData:e&&![5,9,12,16].includes(i.invite_channel)?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name}:null}}):t&&!_?A({key:p,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:w}}}}):t&&_&&A({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:w}}}})}else A({key:"",data:null})}catch{A({key:"",data:null})}})()},[f,_,n,w]),(0,d.jsx)(v,{children:(0,d.jsx)(g.Provider,{value:S,children:e})})},h=()=>{let e=(0,i.useContext)(g);return e.key===c?e:null},y=()=>{let e=(0,i.useContext)(g);return e.key===p?e:null},w=()=>{let e=(0,i.useContext)(g);return e.key===m?e:null},S=()=>(0,i.useContext)(f)},720802:(e,t,n)=>{n.d(t,{M:()=>L,R:()=>M});var i=n(667294),a=n(609326),r=n(498490),l=n(800547),u=n(864723),s=n(969119),o=n(640498),d=n(842909);let c=()=>(0,u.M0)().getItem(a.Vb)||[],m=({pinId:e,link:t,imageSignature:n,domain:i})=>{let r=[...c()],l=r.length,s=l?r[0].pinId:"";if(!l||e!==s){let r=(0,d.Z)({pinId:e,link:t,imageSignature:n,domain:i});(0,u.M0)().prependItem(a.Vb,r,o.LG)}},p=()=>(0,u.M0)().getItem(a.ny)||[],f=({query:e,rs:t,scope:n,rg:i})=>{let r=[...p()],l=r.length,s=l?r[0].query:"";if(!l||e!==s){let r=(0,d.Z)({query:e,rs:t,scope:n,rg:i});(0,u.M0)().prependItem(a.ny,r,o.LG)}},v=({query:e})=>{let t=[...p()].filter(t=>t.query!==e);(0,u.M0)().setItem(a.ny,t)};function g(e,t,n){if(e>=n)return`${n}+`;if(e<=0)return"0";let i=e.toString();if(e>t){let n=Math.floor(e/t);i=`${n*t}+`}return i}var _=n(333289),h=n(445330),y=n(927371),w=n(785893);let S=()=>(0,u.M0)().getItem(a.s1)??[],A=()=>parseInt((0,u.M0)().getItem(a.rN)||0,10),D=e=>g(e,5,20),I=(e,t,n)=>t.reduce((t,n)=>(Array.isArray(e[n])&&(t[n+"Count"]=D(e[n].length)),t),n),k=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:i,downloadedPinsCount:a}=e;e.isQUS=Number(t.length>=1||n.length>=3||i.length>=1||a>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,i=new Date,a=new Date(n||i),r=Math.max(Math.floor(Number(((i.getTime()-a.getTime())/864e5).toFixed(2))),0),l=g(r,7,84);return[r,l]},getStatslogData:function(){return{core:I(e,[],{isQUS:e.isQUS.toString(),isAllowedCountry:e.isAllowedCountry.toString(),daysSinceLastRevisitationBucket:e.daysSinceLastRevisitationBucket}),counts:I(e,["closeupPins","completedSearches","clickthroughPins","savedPins","invitesRedeemed"],{revisitationCount:D(e.revisitationState.count||1),downloadedPinsCount:D(e.downloadedPinsCount)})}}}),C=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:i})=>{let a=(0,l.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:i||"",isAuthenticated:!!e}),r={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:i||"",closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],invitesRedeemed:[],isQUS:0,revisitationState:(0,h.K7)(),daysSinceLastRevisitation:0,daysSinceLastRevisitationBucket:"0",isAllowedCountry:Number(a)};if(e||!r.isAllowedCountry)return Object.freeze({...k(r),...r});r.closeupPins=(0,y.Z)(),r.completedSearches=p(),r.clickthroughPins=c(),r.downloadedPinsCount=A(),r.savedPins=S(),r.invitesRedeemed=(0,_.SL)(),r.revisitationState=(0,h.iU)();let u=k(r),[s,o]=u._getDaysSinceLastRevisitation();return r.daysSinceLastRevisitation=s,r.daysSinceLastRevisitationBucket=o,u._updateUnauthUserAggregateDefinitions(),Object.freeze({...u,...r})},{Provider:P,useHook:M}=(0,r.Z)("UnauthUserStateContext");function U(e,t){let{isAuthenticated:n,countryFromIp:i,countryFromHostName:a,isAllowedCountry:r,regionFromIp:l}=e;if(n||!r)return e;switch(t.type){case"UPDATE":break;case"ADD_UNAUTH_COMPLETED_SEARCH":f(t.payload);break;case"REMOVE_UNAUTH_COMPLETED_SEARCH":v(t.payload);break;case"ADD_UNAUTH_CLICKTHROUGH_PIN":m(t.payload);break;default:return e}return C({isAuthenticated:n,countryFromIp:i,countryFromHostName:a,regionFromIp:l})}function L({children:e,initialState:t}){let[n,a]=(0,i.useReducer)(U,t,C);(0,s.Z)(()=>{a({type:"UPDATE"})});let r=(0,i.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:a}),[n,a]);return(0,w.jsx)(P,{value:r,children:e})}},842909:(e,t,n)=>{n.d(t,{Z:()=>i});let i=function(e){return{...e,ts:Date.now()}}},333289:(e,t,n)=>{n.d(t,{Lp:()=>o,SL:()=>u,nR:()=>s});var i=n(609326),a=n(640498),r=n(864723),l=n(842909);let u=()=>(0,r.M0)().getItem(i.nF)??[],s=()=>(0,r.M0)().getItem(i.T6)??"",o=e=>{if(!e)return;let t=(0,l.Z)({inviteCode:e}),n=(0,r.M0)();n.setItem(i.T6,t),n.prependItem(i.nF,t,a.LG)}},445330:(e,t,n)=>{n.d(t,{K7:()=>l,Vd:()=>s,iU:()=>u});var i=n(609326),a=n(864723),r=n(842909);let l=()=>({count:1,time:0,ts:Date.now()}),u=()=>{try{let{count:e,time:t,ts:n}=(0,a.M0)().getItem(i.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return l()}},s=e=>{(0,a.M0)().setItem(i.SI,(0,r.Z)(e))}},814779:(e,t,n)=>{n.d(t,{E:()=>l,S:()=>u});var i=n(667294),a=n(786525);let r="_loggingInNotHome",l=e=>{e?(0,a.Nh)(r,1):(0,a.L_)(r)},u=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),e&&(0,a.qn)(r)}},897791:(e,t,n)=>{n.d(t,{$:()=>u,Z:()=>d});var i=n(609326),a=n(192820),r=n(864723),l=n(166408);let u=2,s=e=>e?.pins??[],o=e=>e.length?{pins:e}:null,d=()=>{let e=(0,r.M0)(),t=s(e.accessAllowed?e.getItem(i.s1):l.ZP.getItem(a.w3)),n=t=>e.accessAllowed?e.setItem(i.s1,o(t)):l.ZP.setItem(a.w3,o(t)),d=()=>t.length<u;return{pins:t,save:e=>{d()&&n(t.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>n(t.filter(({id:t})=>t!==e)),isSaved:e=>t.some(({id:t})=>t===e),clear:()=>n([]),canSaveMore:d}}},927371:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(640498),a=n(623722),r=n(592305);let l=e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-i.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)},u=()=>l((0,r.ZP)()).map(e=>({...e,id:(0,a.Z)(e.path)||""}))},592305:(e,t,n)=>{n.d(t,{Z4:()=>o,ZP:()=>d,t_:()=>u});var i=n(609326),a=n(640498),r=n(864723),l=n(842909);let u=()=>{let e=(0,r.M0)().getItem(i.pm);return null!==e?JSON.stringify(e):""},s=()=>(0,r.M0)().getItem(i.pm)??[],o=(e,t)=>{let n=[...s()],u=n.length,o=u?n[0].path:"";if(!u||e!==o){let n=(0,l.Z)({path:e,pageType:t});(0,r.M0)().prependItem(i.pm,n,a.LG)}},d=s}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31281-ab6303cab2d2294e.mjs.map